{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/jclon/chatgptVcp/Ionic-vcp-macbook27mars22024/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/category.service\";\nimport * as i3 from \"src/app/services/clicked-element.service\";\nimport * as i4 from \"src/app/services/product.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@ionic/angular\";\nfunction CreateCategoryModalPage_ion_card_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\", 5);\n    i0.ɵɵlistener(\"click\", function CreateCategoryModalPage_ion_card_7_Template_ion_card_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const product_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.openProductDetails(product_r1.id));\n    });\n    i0.ɵɵelementStart(1, \"ion-card-header\")(2, \"ion-card-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"ion-card-content\", 6);\n    i0.ɵɵelement(5, \"ion-img\", 7);\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const product_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(product_r1.productname);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", product_r1.image_product);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Reference: \", product_r1.reference, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Price: \", i0.ɵɵpipeBind4(10, 5, product_r1.price, \"USD\", \"symbol\", \"1.2-2\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Description: \", product_r1.description, \"\");\n  }\n}\nexport class CreateCategoryModalPage {\n  constructor(route, router, categoryService, clickedElementService,\n  // Inject ClickedElementService\n  productService // Inject ProductService\n  ) {\n    this.route = route;\n    this.router = router;\n    this.categoryService = categoryService;\n    this.clickedElementService = clickedElementService;\n    this.productService = productService;\n    this.products = []; // Variable to store products associated with the categoryId\n  }\n\n  ngOnInit() {\n    // Subscribe to route params and extract the productId and categoryId\n    this.route.params.subscribe(params => {\n      this.categoryId = params['id'];\n      this.commerceId = params['commerceId']; // Capture categoryId\n      console.log('this.categoryId transferred : ', this.categoryId);\n      console.log('this.commerceId transferred : ', this.commerceId);\n      // Fetch products associated with the categoryId\n      this.fetchProductsByCategoryId(this.categoryId);\n    });\n    // Retrieve clickedCommerce from ClickedElementService\n    this.clickedElementService.getClickedCommerce().subscribe(clickedCommerce => {\n      this.clickedCommerce = clickedCommerce;\n      console.log('this.clickedCommerce : ', this.clickedCommerce);\n    });\n  }\n  fetchProductsByCategoryId(categoryId) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this.products = yield _this.productService.getProductsByCategoryId(categoryId);\n        console.log('Products:', _this.products);\n      } catch (error) {\n        console.error('Error fetching products:', error);\n      }\n    })();\n  }\n  goBackToCategoryPage() {\n    // Navigate back to the CategoryProductsPage with commerceId\n    this.router.navigate(['/category-products', this.commerceId]);\n  }\n  openProductDetails(productId) {\n    // Navigate to ProductDetailsPage and pass the product ID and category ID as parameters\n    this.router.navigate(['/product-details', productId, {\n      categoryId: this.categoryId\n    }]);\n  }\n  static #_ = this.ɵfac = function CreateCategoryModalPage_Factory(t) {\n    return new (t || CreateCategoryModalPage)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.CategoryService), i0.ɵɵdirectiveInject(i3.ClickedElementService), i0.ɵɵdirectiveInject(i4.ProductService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreateCategoryModalPage,\n    selectors: [[\"app-create-category-modal\"]],\n    decls: 8,\n    vars: 3,\n    consts: [[3, \"translucent\"], [\"slot\", \"start\"], [\"defaultHref\", \"/category-products\", 3, \"click\"], [3, \"fullscreen\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [1, \"card-content\"], [1, \"card-image\", 3, \"src\"]],\n    template: function CreateCategoryModalPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-buttons\", 1)(3, \"ion-back-button\", 2);\n        i0.ɵɵlistener(\"click\", function CreateCategoryModalPage_Template_ion_back_button_click_3_listener() {\n          return ctx.goBackToCategoryPage();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"ion-title\");\n        i0.ɵɵtext(5, \"Products\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(6, \"ion-content\", 3);\n        i0.ɵɵtemplate(7, CreateCategoryModalPage_ion_card_7_Template, 13, 10, \"ion-card\", 4);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"translucent\", true);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"fullscreen\", true);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.products);\n      }\n    },\n    dependencies: [i5.NgForOf, i6.IonButtons, i6.IonCard, i6.IonCardContent, i6.IonCardHeader, i6.IonCardTitle, i6.IonContent, i6.IonHeader, i6.IonImg, i6.IonTitle, i6.IonToolbar, i6.IonBackButton, i5.CurrencyPipe],\n    styles: [\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n.card-image[_ngcontent-%COMP%] {\\n  width: 100%; \\n\\n  height: 200px; \\n\\n  object-fit: contain; \\n\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvY3JlYXRlLWNhdGVnb3J5LW1vZGFsL2NyZWF0ZS1jYXRlZ29yeS1tb2RhbC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7OztHQUFBO0FBV0Usc0RBQUE7QUFDRjtFQUNFLFdBQUEsRUFBQSxzQkFBQTtFQUNBLGFBQUEsRUFBQSx1Q0FBQTtFQUNBLG1CQUFBLEVBQUEsbURBQUE7QUFBRiIsInNvdXJjZXNDb250ZW50IjpbIi8qIC5jYXJkLWNvbnRlbnQge1xyXG4gICAgLmNhcmQtaW1hZ2Uge1xyXG4gICAgICBtYXgtd2lkdGg6IDEwMCU7XHJcbiAgICAgIG1heC1oZWlnaHQ6IDIwMHB4OyBcclxuICAgICAgd2lkdGg6IGF1dG87XHJcbiAgICAgIGhlaWdodDogYXV0bztcclxuICAgICAgbWFyZ2luOiBhdXRvO1xyXG4gICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgIH1cclxufSAqL1xyXG5cclxuICAvKiBEZWZpbmUgQ1NTIGNsYXNzIGZvciBjb250cm9sbGluZyBpbWFnZSBkaW1lbnNpb25zICovXHJcbi5jYXJkLWltYWdlIHtcclxuICB3aWR0aDogMTAwJTsgLyogU2V0IHdpZHRoIHRvIDEwMCUgKi9cclxuICBoZWlnaHQ6IDIwMHB4OyAvKiBTZXQgYSBmaXhlZCBoZWlnaHQgZm9yIGNvbnNpc3RlbmN5ICovXHJcbiAgb2JqZWN0LWZpdDogY29udGFpbjsgLyogTWFpbnRhaW4gYXNwZWN0IHJhdGlvIGFuZCBmaXQgd2l0aGluIGNvbnRhaW5lciAqL1xyXG59XHJcblxyXG4gICJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵlistener","CreateCategoryModalPage_ion_card_7_Template_ion_card_click_0_listener","restoredCtx","ɵɵrestoreView","_r3","product_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","openProductDetails","id","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵtextInterpolate","productname","ɵɵproperty","image_product","ɵɵtextInterpolate1","reference","ɵɵpipeBind4","price","description","CreateCategoryModalPage","constructor","route","router","categoryService","clickedElementService","productService","products","ngOnInit","params","subscribe","categoryId","commerceId","console","log","fetchProductsByCategoryId","getClickedCommerce","clickedCommerce","_this","_asyncToGenerator","getProductsByCategoryId","error","goBackToCategoryPage","navigate","productId","_","ɵɵdirectiveInject","i1","ActivatedRoute","Router","i2","CategoryService","i3","ClickedElementService","i4","ProductService","_2","selectors","decls","vars","consts","template","CreateCategoryModalPage_Template","rf","ctx","CreateCategoryModalPage_Template_ion_back_button_click_3_listener","ɵɵtemplate","CreateCategoryModalPage_ion_card_7_Template"],"sources":["C:\\Users\\jclon\\chatgptVcp\\Ionic-vcp-macbook27mars22024\\src\\app\\pages\\create-category-modal\\create-category-modal.page.ts","C:\\Users\\jclon\\chatgptVcp\\Ionic-vcp-macbook27mars22024\\src\\app\\pages\\create-category-modal\\create-category-modal.page.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { CategoryService } from 'src/app/services/category.service';\r\nimport { CommerceService } from 'src/app/services/commerce.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { ProductService } from 'src/app/services/product.service'; // Import ProductService\r\nimport { ClickedElementService } from 'src/app/services/clicked-element.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-create-category-modal',\r\n  templateUrl: './create-category-modal.page.html',\r\n  styleUrls: ['./create-category-modal.page.scss'],\r\n})\r\nexport class CreateCategoryModalPage implements OnInit {\r\n\r\n  categoryId!: number; // Variable to store categoryId\r\n  clickedCategory: any; // Variable to store the clicked category\r\n  commerceId!: number; // Variable to store the commerceId\r\n  clickedCommerce: any; // Variable to store the clicked commerce\r\n  products: any[] = []; // Variable to store products associated with the categoryId\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private categoryService: CategoryService,\r\n    private clickedElementService: ClickedElementService, // Inject ClickedElementService\r\n    private productService: ProductService // Inject ProductService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n     // Subscribe to route params and extract the productId and categoryId\r\n    this.route.params.subscribe(params => {\r\n      this.categoryId = params['id'];\r\n      this.commerceId = params['commerceId']; // Capture categoryId\r\n\r\n      console.log('this.categoryId transferred : ', this.categoryId);\r\n      console.log('this.commerceId transferred : ', this.commerceId);\r\n\r\n      // Fetch products associated with the categoryId\r\n      this.fetchProductsByCategoryId(this.categoryId);\r\n\r\n    });\r\n    \r\n\r\n    // Retrieve clickedCommerce from ClickedElementService\r\n    this.clickedElementService.getClickedCommerce().subscribe((clickedCommerce) => {\r\n      this.clickedCommerce = clickedCommerce;\r\n      console.log('this.clickedCommerce : ', this.clickedCommerce);\r\n    });\r\n  }\r\n\r\n  async fetchProductsByCategoryId(categoryId: number) {\r\n    try {\r\n      this.products = await this.productService.getProductsByCategoryId(categoryId);\r\n      console.log('Products:', this.products);\r\n    } catch (error) {\r\n      console.error('Error fetching products:', error);\r\n    }\r\n  }\r\n\r\n  goBackToCategoryPage() {\r\n    // Navigate back to the CategoryProductsPage with commerceId\r\n    this.router.navigate(['/category-products', this.commerceId]); \r\n  } \r\n\r\n  openProductDetails(productId: number) {\r\n    // Navigate to ProductDetailsPage and pass the product ID and category ID as parameters\r\n    this.router.navigate(['/product-details', productId, { categoryId: this.categoryId }]);\r\n  } \r\n}\r\n","<ion-header [translucent]=\"true\">\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button (click)=\"goBackToCategoryPage()\" defaultHref=\"/category-products\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>Products</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content [fullscreen]=\"true\">\r\n  <ion-card *ngFor=\"let product of products\" (click)=\"openProductDetails(product.id)\">\r\n    <ion-card-header>\r\n      <ion-card-title>{{ product.productname }}</ion-card-title>\r\n    </ion-card-header>\r\n  \r\n    <ion-card-content class=\"card-content\">\r\n      <ion-img class=\"card-image\" [src]=\"product.image_product\"></ion-img>\r\n      <p>Reference: {{ product.reference }}</p>\r\n      <p>Price: {{ product.price | currency:'USD':'symbol':'1.2-2' }}</p>\r\n      <p>Description: {{ product.description }}</p>\r\n    </ion-card-content>\r\n  </ion-card>\r\n</ion-content>\r\n\r\n"],"mappings":";;;;;;;;;;;ICUEA,EAAA,CAAAC,cAAA,kBAAoF;IAAzCD,EAAA,CAAAE,UAAA,mBAAAC,sEAAA;MAAA,MAAAC,WAAA,GAAAJ,EAAA,CAAAK,aAAA,CAAAC,GAAA;MAAA,MAAAC,UAAA,GAAAH,WAAA,CAAAI,SAAA;MAAA,MAAAC,MAAA,GAAAT,EAAA,CAAAU,aAAA;MAAA,OAASV,EAAA,CAAAW,WAAA,CAAAF,MAAA,CAAAG,kBAAA,CAAAL,UAAA,CAAAM,EAAA,CAA8B;IAAA,EAAC;IACjFb,EAAA,CAAAC,cAAA,sBAAiB;IACCD,EAAA,CAAAc,MAAA,GAAyB;IAAAd,EAAA,CAAAe,YAAA,EAAiB;IAG5Df,EAAA,CAAAC,cAAA,0BAAuC;IACrCD,EAAA,CAAAgB,SAAA,iBAAoE;IACpEhB,EAAA,CAAAC,cAAA,QAAG;IAAAD,EAAA,CAAAc,MAAA,GAAkC;IAAAd,EAAA,CAAAe,YAAA,EAAI;IACzCf,EAAA,CAAAC,cAAA,QAAG;IAAAD,EAAA,CAAAc,MAAA,GAA4D;;IAAAd,EAAA,CAAAe,YAAA,EAAI;IACnEf,EAAA,CAAAC,cAAA,SAAG;IAAAD,EAAA,CAAAc,MAAA,IAAsC;IAAAd,EAAA,CAAAe,YAAA,EAAI;;;;IAP7Bf,EAAA,CAAAiB,SAAA,GAAyB;IAAzBjB,EAAA,CAAAkB,iBAAA,CAAAX,UAAA,CAAAY,WAAA,CAAyB;IAIbnB,EAAA,CAAAiB,SAAA,GAA6B;IAA7BjB,EAAA,CAAAoB,UAAA,QAAAb,UAAA,CAAAc,aAAA,CAA6B;IACtDrB,EAAA,CAAAiB,SAAA,GAAkC;IAAlCjB,EAAA,CAAAsB,kBAAA,gBAAAf,UAAA,CAAAgB,SAAA,KAAkC;IAClCvB,EAAA,CAAAiB,SAAA,GAA4D;IAA5DjB,EAAA,CAAAsB,kBAAA,YAAAtB,EAAA,CAAAwB,WAAA,QAAAjB,UAAA,CAAAkB,KAAA,gCAA4D;IAC5DzB,EAAA,CAAAiB,SAAA,GAAsC;IAAtCjB,EAAA,CAAAsB,kBAAA,kBAAAf,UAAA,CAAAmB,WAAA,KAAsC;;;ADL/C,OAAM,MAAOC,uBAAuB;EAQlCC,YACUC,KAAqB,EACrBC,MAAc,EACdC,eAAgC,EAChCC,qBAA4C;EAAE;EAC9CC,cAA8B,CAAC;EAAA,E;IAJ/B,KAAAJ,KAAK,GAALA,KAAK;IACL,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,eAAe,GAAfA,eAAe;IACf,KAAAC,qBAAqB,GAArBA,qBAAqB;IACrB,KAAAC,cAAc,GAAdA,cAAc;IAPxB,KAAAC,QAAQ,GAAU,EAAE,CAAC,CAAC;EAQlB;;EAEJC,QAAQA,CAAA;IACL;IACD,IAAI,CAACN,KAAK,CAACO,MAAM,CAACC,SAAS,CAACD,MAAM,IAAG;MACnC,IAAI,CAACE,UAAU,GAAGF,MAAM,CAAC,IAAI,CAAC;MAC9B,IAAI,CAACG,UAAU,GAAGH,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;MAExCI,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAE,IAAI,CAACH,UAAU,CAAC;MAC9DE,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAE,IAAI,CAACF,UAAU,CAAC;MAE9D;MACA,IAAI,CAACG,yBAAyB,CAAC,IAAI,CAACJ,UAAU,CAAC;IAEjD,CAAC,CAAC;IAGF;IACA,IAAI,CAACN,qBAAqB,CAACW,kBAAkB,EAAE,CAACN,SAAS,CAAEO,eAAe,IAAI;MAC5E,IAAI,CAACA,eAAe,GAAGA,eAAe;MACtCJ,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAE,IAAI,CAACG,eAAe,CAAC;IAC9D,CAAC,CAAC;EACJ;EAEMF,yBAAyBA,CAACJ,UAAkB;IAAA,IAAAO,KAAA;IAAA,OAAAC,iBAAA;MAChD,IAAI;QACFD,KAAI,CAACX,QAAQ,SAASW,KAAI,CAACZ,cAAc,CAACc,uBAAuB,CAACT,UAAU,CAAC;QAC7EE,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEI,KAAI,CAACX,QAAQ,CAAC;OACxC,CAAC,OAAOc,KAAK,EAAE;QACdR,OAAO,CAACQ,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;;IACjD;EACH;EAEAC,oBAAoBA,CAAA;IAClB;IACA,IAAI,CAACnB,MAAM,CAACoB,QAAQ,CAAC,CAAC,oBAAoB,EAAE,IAAI,CAACX,UAAU,CAAC,CAAC;EAC/D;EAEA3B,kBAAkBA,CAACuC,SAAiB;IAClC;IACA,IAAI,CAACrB,MAAM,CAACoB,QAAQ,CAAC,CAAC,kBAAkB,EAAEC,SAAS,EAAE;MAAEb,UAAU,EAAE,IAAI,CAACA;IAAU,CAAE,CAAC,CAAC;EACxF;EAAC,QAAAc,CAAA,G;qBAvDUzB,uBAAuB,EAAA3B,EAAA,CAAAqD,iBAAA,CAAAC,EAAA,CAAAC,cAAA,GAAAvD,EAAA,CAAAqD,iBAAA,CAAAC,EAAA,CAAAE,MAAA,GAAAxD,EAAA,CAAAqD,iBAAA,CAAAI,EAAA,CAAAC,eAAA,GAAA1D,EAAA,CAAAqD,iBAAA,CAAAM,EAAA,CAAAC,qBAAA,GAAA5D,EAAA,CAAAqD,iBAAA,CAAAQ,EAAA,CAAAC,cAAA;EAAA;EAAA,QAAAC,EAAA,G;UAAvBpC,uBAAuB;IAAAqC,SAAA;IAAAC,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,iCAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCdpCtE,EAAA,CAAAC,cAAA,oBAAiC;QAGVD,EAAA,CAAAE,UAAA,mBAAAsE,kEAAA;UAAA,OAASD,GAAA,CAAAtB,oBAAA,EAAsB;QAAA,EAAC;QAAkCjD,EAAA,CAAAe,YAAA,EAAkB;QAEvGf,EAAA,CAAAC,cAAA,gBAAW;QAAAD,EAAA,CAAAc,MAAA,eAAQ;QAAAd,EAAA,CAAAe,YAAA,EAAY;QAInCf,EAAA,CAAAC,cAAA,qBAAiC;QAC/BD,EAAA,CAAAyE,UAAA,IAAAC,2CAAA,wBAWW;QACb1E,EAAA,CAAAe,YAAA,EAAc;;;QAtBFf,EAAA,CAAAoB,UAAA,qBAAoB;QASnBpB,EAAA,CAAAiB,SAAA,GAAmB;QAAnBjB,EAAA,CAAAoB,UAAA,oBAAmB;QACApB,EAAA,CAAAiB,SAAA,GAAW;QAAXjB,EAAA,CAAAoB,UAAA,YAAAmD,GAAA,CAAArC,QAAA,CAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}