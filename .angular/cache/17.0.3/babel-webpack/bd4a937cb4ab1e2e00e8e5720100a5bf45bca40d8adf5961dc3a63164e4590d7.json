{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/jclon/chatgptVcp/Ionic-vcp-macbook27mars22024/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommerceModalPage } from '../commerce-modal/commerce-modal.page'; // Adjust path as needed\nimport { Validators } from '@angular/forms';\nimport { UpdateCommerceModalPage } from '../update-commerce-modal/update-commerce-modal.page'; // Adjust path as needed\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"src/app/services/user.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/services/commerce.service\";\nimport * as i5 from \"@ionic/angular\";\nimport * as i6 from \"@angular/common\";\nfunction CommercesPage_div_10_ion_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 7);\n    i0.ɵɵlistener(\"click\", function CommercesPage_div_10_ion_item_2_Template_ion_item_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const commerce_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.loadCommerceDetails(commerce_r4));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const commerce_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"selected-commerce\", commerce_r4.id === ctx_r3.selectedCommerceId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", commerce_r4.commercename, \" \");\n  }\n}\nfunction CommercesPage_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"ion-list\");\n    i0.ɵɵtemplate(2, CommercesPage_div_10_ion_item_2_Template, 2, 3, \"ion-item\", 10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.commerces);\n  }\n}\nfunction CommercesPage_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"form\", 12)(2, \"ion-item\");\n    i0.ɵɵelement(3, \"img\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-item\")(5, \"ion-label\", 14);\n    i0.ɵɵtext(6, \"Commerce Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"ion-input\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"ion-item\")(9, \"ion-label\", 14);\n    i0.ɵɵtext(10, \"Services\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"ion-textarea\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"ion-item\")(13, \"ion-label\", 14);\n    i0.ɵɵtext(14, \"Ville\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"ion-textarea\", 17);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    let tmp_1_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.commerceForm);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", (tmp_1_0 = ctx_r1.commerceForm.get(\"image_commerce\")) == null ? null : tmp_1_0.value, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"readonly\", true);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"readonly\", true);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"readonly\", true);\n  }\n}\nfunction CommercesPage_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.noCommerceMessage);\n  }\n}\nexport class CommercesPage {\n  constructor(formBuilder, userService, router, commerceService, modalController) {\n    this.formBuilder = formBuilder;\n    this.userService = userService;\n    this.router = router;\n    this.commerceService = commerceService;\n    this.modalController = modalController;\n    this.villes = [];\n    this.villeName = null;\n    this.commerces = []; // Define commerces property\n    this.selectedCommerceId = null;\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this.commerceForm = _this.formBuilder.group({\n          commercename: ['', Validators.required],\n          services: ['', Validators.required],\n          image_commerce: [''],\n          ville_id: ['']\n          // Add more form controls as needed for other fields\n        });\n\n        _this.villes = yield _this.commerceService.getAllVilles();\n        // Fetch businessOwnerId\n        const businessOwnerId = yield _this.userService.getBusinessOwnerId();\n        if (businessOwnerId !== null) {\n          const commerces = yield _this.commerceService.getCommercesByBusinessOwnerWithMonthlyFeePaid(businessOwnerId);\n          // Sort the commerces array by ID in ascending order\n          commerces.sort((a, b) => a.id - b.id);\n          // Now the commerces array is sorted by ID\n          _this.commerces = commerces;\n          console.log('commerces', _this.commerces);\n          // Check if commerces array is empty\n          if (_this.commerces.length === 0) {\n            // If commerces array is empty, lock the app and navigate to '/villes-commerces'\n            _this.lockApp();\n            // this.router.navigate(['/villes-commerces']);\n          } else {\n            // Call loadFirstCommerce method with the fetched commerces\n            _this.loadFirstCommerce(_this.commerces);\n          }\n        }\n      } catch (error) {\n        console.error('Error loading commerces:', error);\n      }\n    })();\n  }\n  loadFirstCommerce(commerces) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        // Check if commerces array is not empty\n        if (commerces.length > 0) {\n          _this2.firstCommerce = commerces[0];\n          _this2.selectedCommerceId = _this2.firstCommerce.id;\n          // Fetch the ville name based on the ville_id of the first commerce\n          const villeId = _this2.firstCommerce.ville_id;\n          const villeName = yield _this2.commerceService.getVilleNameByVilleId(villeId);\n          _this2.commerceForm.patchValue({\n            commercename: _this2.firstCommerce.commercename,\n            services: _this2.firstCommerce.services,\n            image_commerce: _this2.firstCommerce.image_commerce || '',\n            business_owner_id: _this2.firstCommerce.business_owner_id,\n            ville_id: villeName\n            // Patch other form controls with corresponding commerce details\n          });\n        } else {\n          _this2.noCommerceMessage = 'No commerce for the current business owner.';\n        }\n      } catch (error) {\n        console.error('Error loading first commerce:', error);\n      }\n    })();\n  }\n  lockApp() {\n    this.router.navigate(['/villes-commerces']);\n  }\n  openCommerceModal() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const businessOwnerId = yield _this3.userService.getBusinessOwnerId();\n        const modal = yield _this3.modalController.create({\n          component: CommerceModalPage,\n          componentProps: {\n            businessOwnerId: businessOwnerId\n          }\n        });\n        // Handle modal dismissal if needed\n        modal.onDidDismiss().then(result => {\n          console.log('Modal dismissed:', result);\n          if (result.data.dismissed === 'confirm') {\n            // Handle confirmation\n            console.log('Modal dismissed with confirm role');\n            // For example, refresh commerce data\n            _this3.refreshCommerceData();\n          } else if (result.data.dismissed === 'cancel') {\n            // Handle cancellation\n            console.log('Modal dismissed with cancel role');\n          } else {\n            // Handle other dismissals\n            console.log('Modal dismissed with unexpected role:', result.data.dismissed);\n          }\n        });\n        yield modal.present();\n      } catch (error) {\n        console.error('Error opening commerce modal:', error);\n      }\n    })();\n  }\n  // Example method to refresh commerce data after adding a new commerce\n  refreshCommerceData() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const businessOwnerId = yield _this4.userService.getBusinessOwnerId();\n        if (businessOwnerId) {\n          const commerces = yield _this4.commerceService.getCommercesByBusinessOwnerWithMonthlyFeePaid(businessOwnerId);\n          // Sort the commerces array by ID in ascending order\n          commerces.sort((a, b) => a.id - b.id);\n          // Now the commerces array is sorted by ID\n          _this4.commerces = commerces;\n          // Set firstCommerce to the last item in the commerces array\n          if (_this4.commerces.length > 0) {\n            _this4.firstCommerce = _this4.commerces[_this4.commerces.length - 1];\n            // Repopulate form fields with updated data\n            _this4.loadCommerceDetails(_this4.firstCommerce);\n            // Set the clicked commerce\n            _this4.commerceService.setClickedCommerce(_this4.firstCommerce);\n          }\n        }\n      } catch (error) {\n        console.error('Error refreshing commerce data:', error);\n        // Handle error as needed\n      }\n    })();\n  }\n\n  refreshCommerceDataUp() {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        if (_this5.selectedCommerceId) {\n          const commerce = yield _this5.commerceService.getCommerceById(_this5.selectedCommerceId);\n          _this5.loadCommerceDetails(commerce);\n        }\n      } catch (error) {\n        console.error('Error refreshing commerce data:', error);\n        // Handle error as needed\n      }\n    })();\n  }\n\n  updateVilleName(villeId) {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      _this6.villeName = yield _this6.commerceService.getVilleNameByVilleId(villeId);\n    })();\n  }\n  loadCommerceDetails(commerce) {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      _this7.selectedCommerceId = commerce.id;\n      _this7.firstCommerce = commerce;\n      const villeId = _this7.firstCommerce.ville_id;\n      const villeName = yield _this7.commerceService.getVilleNameByVilleId(villeId);\n      // Populate form with details of the selected commerce\n      _this7.commerceForm.patchValue({\n        commercename: commerce.commercename,\n        services: commerce.services,\n        image_commerce: commerce.image_commerce || '',\n        ville_id: villeName\n        // Populate other form controls as needed\n      });\n    })();\n  }\n\n  openUpdateCommerceModal() {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        // Check if selectedCommerceId is defined\n        if (!_this8.selectedCommerceId) {\n          console.error('No commerce selected.');\n          return;\n        }\n        // Fetch the commerce corresponding to the selectedCommerceId\n        const selectedCommerce = yield _this8.commerceService.getCommerceById(_this8.selectedCommerceId);\n        // Open the modal with the UpdateCommerceModalPage component\n        const modal = yield _this8.modalController.create({\n          component: UpdateCommerceModalPage,\n          componentProps: {\n            commerce: selectedCommerce // Pass the selected commerce as props\n          }\n        });\n        // Handle modal dismissal if needed\n        modal.onDidDismiss().then(result => {\n          console.log('Modal dismissed:', result);\n          if (result.data.dismissed === 'confirm') {\n            // Handle confirmation\n            console.log('Modal dismissed with confirm role');\n            // For example, refresh commerce data\n            _this8.refreshCommerceDataUp();\n          } else if (result.data.dismissed === 'cancel') {\n            // Handle cancellation\n            console.log('Modal dismissed with cancel role');\n          } else {\n            // Handle other dismissals\n            console.log('Modal dismissed with unexpected role:', result.data.dismissed);\n          }\n        });\n        // Present the modal\n        yield modal.present();\n      } catch (error) {\n        console.error('Error opening update commerce modal:', error);\n      }\n    })();\n  }\n  static #_ = this.ɵfac = function CommercesPage_Factory(t) {\n    return new (t || CommercesPage)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.CommerceService), i0.ɵɵdirectiveInject(i5.ModalController));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CommercesPage,\n    selectors: [[\"app-commerces\"]],\n    decls: 16,\n    vars: 3,\n    consts: [[\"slot\", \"end\"], [\"color\", \"primary\", 3, \"click\"], [\"scrolly\", \"true\", 2, \"max-height\", \"100px\"], [\"class\", \"commerce-list\", 4, \"ngIf\"], [\"class\", \"commerce-form\", 4, \"ngIf\"], [\"class\", \"no-commerce-message\", 4, \"ngIf\"], [\"vertical\", \"bottom\", \"horizontal\", \"end\", \"slot\", \"fixed\"], [3, \"click\"], [\"name\", \"add\"], [1, \"commerce-list\"], [3, \"selected-commerce\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"commerce-form\"], [3, \"formGroup\"], [\"alt\", \"Commerce Image\", 3, \"src\"], [\"position\", \"floating\"], [\"type\", \"text\", \"formControlName\", \"commercename\", 3, \"readonly\"], [\"formControlName\", \"services\", \"rows\", \"10\", 2, \"min-height\", \"200px\", 3, \"readonly\"], [\"formControlName\", \"ville_id\", 3, \"readonly\"], [1, \"no-commerce-message\"]],\n    template: function CommercesPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n        i0.ɵɵtext(3, \"Commerces\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-buttons\", 0)(5, \"ion-button\", 1);\n        i0.ɵɵlistener(\"click\", function CommercesPage_Template_ion_button_click_5_listener() {\n          return ctx.openUpdateCommerceModal();\n        });\n        i0.ɵɵtext(6, \" Edit \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(7, \"ion-content\");\n        i0.ɵɵtext(8, \" commerces \");\n        i0.ɵɵelementStart(9, \"div\", 2);\n        i0.ɵɵtemplate(10, CommercesPage_div_10_Template, 3, 1, \"div\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(11, CommercesPage_div_11_Template, 16, 5, \"div\", 4)(12, CommercesPage_div_12_Template, 3, 1, \"div\", 5);\n        i0.ɵɵelementStart(13, \"ion-fab\", 6)(14, \"ion-fab-button\", 7);\n        i0.ɵɵlistener(\"click\", function CommercesPage_Template_ion_fab_button_click_14_listener() {\n          return ctx.openCommerceModal();\n        });\n        i0.ɵɵelement(15, \"ion-icon\", 8);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngIf\", ctx.commerces && ctx.commerces.length > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.firstCommerce);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.noCommerceMessage);\n      }\n    },\n    dependencies: [i6.NgForOf, i6.NgIf, i1.ɵNgNoValidate, i1.NgControlStatus, i1.NgControlStatusGroup, i5.IonButton, i5.IonButtons, i5.IonContent, i5.IonFab, i5.IonFabButton, i5.IonHeader, i5.IonIcon, i5.IonInput, i5.IonItem, i5.IonLabel, i5.IonList, i5.IonTextarea, i5.IonTitle, i5.IonToolbar, i5.TextValueAccessor, i1.FormGroupDirective, i1.FormControlName],\n    styles: [\"div[scrolly=true][_ngcontent-%COMP%] {\\n  overflow-y: auto;\\n  max-height: 200px; \\n\\n}\\n\\n.commerce-list[_ngcontent-%COMP%] {\\n  padding-bottom: 20px; \\n\\n}\\n\\n.commerce-form[_ngcontent-%COMP%] {\\n  padding-top: 20px; \\n\\n}\\n\\n.selected-commerce[_ngcontent-%COMP%] {\\n  --ion-item-background: #f0f8ff; \\n\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvY29tbWVyY2VzL2NvbW1lcmNlcy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDRSxnQkFBQTtFQUNBLGlCQUFBLEVBQUEsa0RBQUE7QUFBRjs7QUFHQTtFQUNJLG9CQUFBLEVBQUEscUJBQUE7QUFBSjs7QUFHQTtFQUNJLGlCQUFBLEVBQUEscUJBQUE7QUFBSjs7QUFHQTtFQUNFLDhCQUFBLEVBQUEsMEJBQUE7QUFBRiIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5kaXZbc2Nyb2xseT1cInRydWVcIl0ge1xyXG4gIG92ZXJmbG93LXk6IGF1dG87XHJcbiAgbWF4LWhlaWdodDogMjAwcHg7IC8qIFRoaXMgc2hvdWxkIG1hdGNoIHRoZSBtYXgtaGVpZ2h0IGluIHlvdXIgSFRNTCAqL1xyXG59XHJcblxyXG4uY29tbWVyY2UtbGlzdCB7XHJcbiAgICBwYWRkaW5nLWJvdHRvbTogMjBweDsgLyogQWRqdXN0IGFzIG5lZWRlZCAqL1xyXG59XHJcbiAgXHJcbi5jb21tZXJjZS1mb3JtIHtcclxuICAgIHBhZGRpbmctdG9wOiAyMHB4OyAvKiBBZGp1c3QgYXMgbmVlZGVkICovXHJcbn1cclxuICBcclxuLnNlbGVjdGVkLWNvbW1lcmNlIHtcclxuICAtLWlvbi1pdGVtLWJhY2tncm91bmQ6ICNmMGY4ZmY7IC8qIExpZ2h0IGJsdWUtZ3JleSBjb2xvciAqL1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["CommerceModalPage","Validators","UpdateCommerceModalPage","i0","ɵɵelementStart","ɵɵlistener","CommercesPage_div_10_ion_item_2_Template_ion_item_click_0_listener","restoredCtx","ɵɵrestoreView","_r6","commerce_r4","$implicit","ctx_r5","ɵɵnextContext","ɵɵresetView","loadCommerceDetails","ɵɵtext","ɵɵelementEnd","ɵɵclassProp","id","ctx_r3","selectedCommerceId","ɵɵadvance","ɵɵtextInterpolate1","commercename","ɵɵtemplate","CommercesPage_div_10_ion_item_2_Template","ɵɵproperty","ctx_r0","commerces","ɵɵelement","ctx_r1","commerceForm","tmp_1_0","get","value","ɵɵsanitizeUrl","ɵɵtextInterpolate","ctx_r2","noCommerceMessage","CommercesPage","constructor","formBuilder","userService","router","commerceService","modalController","villes","villeName","ngOnInit","_this","_asyncToGenerator","group","required","services","image_commerce","ville_id","getAllVilles","businessOwnerId","getBusinessOwnerId","getCommercesByBusinessOwnerWithMonthlyFeePaid","sort","a","b","console","log","length","lockApp","loadFirstCommerce","error","_this2","firstCommerce","villeId","getVilleNameByVilleId","patchValue","business_owner_id","navigate","openCommerceModal","_this3","modal","create","component","componentProps","onDidDismiss","then","result","data","dismissed","refreshCommerceData","present","_this4","setClickedCommerce","refreshCommerceDataUp","_this5","commerce","getCommerceById","updateVilleName","_this6","_this7","openUpdateCommerceModal","_this8","selectedCommerce","_","ɵɵdirectiveInject","i1","FormBuilder","i2","UserService","i3","Router","i4","CommerceService","i5","ModalController","_2","selectors","decls","vars","consts","template","CommercesPage_Template","rf","ctx","CommercesPage_Template_ion_button_click_5_listener","CommercesPage_div_10_Template","CommercesPage_div_11_Template","CommercesPage_div_12_Template","CommercesPage_Template_ion_fab_button_click_14_listener"],"sources":["C:\\Users\\jclon\\chatgptVcp\\Ionic-vcp-macbook27mars22024\\src\\app\\pages\\commerces\\commerces.page.ts","C:\\Users\\jclon\\chatgptVcp\\Ionic-vcp-macbook27mars22024\\src\\app\\pages\\commerces\\commerces.page.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { Router } from '@angular/router';\r\nimport { CommerceService } from 'src/app/services/commerce.service';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { CommerceModalPage } from '../commerce-modal/commerce-modal.page'; // Adjust path as needed\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { UpdateCommerceModalPage } from '../update-commerce-modal/update-commerce-modal.page'; // Adjust path as needed\r\n\r\n@Component({\r\n  selector: 'app-commerces',\r\n  templateUrl: './commerces.page.html',\r\n  styleUrls: ['./commerces.page.scss'],\r\n})\r\nexport class CommercesPage implements OnInit {\r\n  firstCommerce: any;\r\n  noCommerceMessage!: string;\r\n  commerceForm!: FormGroup;\r\n  villes: any[] = [];\r\n  villeName: string | null = null;\r\n  commerces: any[] = []; // Define commerces property\r\n  selectedCommerceId: number | null = null;\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private userService: UserService,\r\n    private router: Router,\r\n    private commerceService: CommerceService,\r\n    private modalController: ModalController\r\n  ) { }\r\n\r\n  async ngOnInit() {\r\n    try {\r\n      this.commerceForm = this.formBuilder.group({\r\n        commercename: ['', Validators.required],\r\n        services: ['', Validators.required],\r\n        image_commerce: [''], // Assuming this field is optional\r\n        ville_id: [''],\r\n        // Add more form controls as needed for other fields\r\n      });\r\n\r\n      this.villes = await this.commerceService.getAllVilles();\r\n\r\n      // Fetch businessOwnerId\r\n      const businessOwnerId = await this.userService.getBusinessOwnerId();\r\n\r\n      if (businessOwnerId !== null) {\r\n        const commerces = await this.commerceService.getCommercesByBusinessOwnerWithMonthlyFeePaid(businessOwnerId);\r\n        // Sort the commerces array by ID in ascending order\r\n        commerces.sort((a, b) => a.id - b.id);\r\n\r\n        // Now the commerces array is sorted by ID\r\n        this.commerces = commerces;\r\n        console.log('commerces', this.commerces);\r\n\r\n        // Check if commerces array is empty\r\n        if (this.commerces.length === 0) {\r\n          // If commerces array is empty, lock the app and navigate to '/villes-commerces'\r\n          this.lockApp();\r\n          // this.router.navigate(['/villes-commerces']);\r\n        } else {\r\n          // Call loadFirstCommerce method with the fetched commerces\r\n          this.loadFirstCommerce(this.commerces);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading commerces:', error);\r\n    }\r\n  }\r\n\r\n  async loadFirstCommerce(commerces: any[]) {\r\n    try {\r\n      // Check if commerces array is not empty\r\n      if (commerces.length > 0) {\r\n        this.firstCommerce = commerces[0];\r\n        this.selectedCommerceId = this.firstCommerce.id;\r\n        // Fetch the ville name based on the ville_id of the first commerce\r\n        const villeId = this.firstCommerce.ville_id;\r\n        const villeName = await this.commerceService.getVilleNameByVilleId(\r\n          villeId\r\n        );\r\n\r\n        this.commerceForm.patchValue({\r\n          commercename: this.firstCommerce.commercename,\r\n          services: this.firstCommerce.services,\r\n          image_commerce: this.firstCommerce.image_commerce || '',\r\n          business_owner_id: this.firstCommerce.business_owner_id,\r\n          ville_id: villeName,\r\n          // Patch other form controls with corresponding commerce details\r\n        });\r\n      } else {\r\n        this.noCommerceMessage = 'No commerce for the current business owner.';\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading first commerce:', error);\r\n    }\r\n  }\r\n\r\n  lockApp() {\r\n    this.router.navigate(['/villes-commerces']);\r\n  }\r\n\r\n  async openCommerceModal() {\r\n    try {\r\n      const businessOwnerId = await this.userService.getBusinessOwnerId();\r\n      const modal = await this.modalController.create({\r\n        component: CommerceModalPage,\r\n        componentProps: {\r\n          businessOwnerId: businessOwnerId,\r\n        },\r\n      });\r\n\r\n      // Handle modal dismissal if needed\r\n      modal.onDidDismiss().then((result) => {\r\n        console.log('Modal dismissed:', result);\r\n        if (result.data.dismissed === 'confirm') {\r\n          // Handle confirmation\r\n          console.log('Modal dismissed with confirm role');\r\n          // For example, refresh commerce data\r\n          this.refreshCommerceData();\r\n        } else if (result.data.dismissed === 'cancel') {\r\n          // Handle cancellation\r\n          console.log('Modal dismissed with cancel role');\r\n        } else {\r\n          // Handle other dismissals\r\n          console.log(\r\n            'Modal dismissed with unexpected role:',\r\n            result.data.dismissed\r\n          );\r\n        }\r\n      });\r\n\r\n      await modal.present();\r\n    } catch (error) {\r\n      console.error('Error opening commerce modal:', error);\r\n    }\r\n  }\r\n\r\n  // Example method to refresh commerce data after adding a new commerce\r\n  async refreshCommerceData() {\r\n    try {\r\n      const businessOwnerId = await this.userService.getBusinessOwnerId();\r\n      if (businessOwnerId) {\r\n        const commerces =\r\n          await this.commerceService.getCommercesByBusinessOwnerWithMonthlyFeePaid(\r\n            businessOwnerId\r\n          );\r\n\r\n        // Sort the commerces array by ID in ascending order\r\n        commerces.sort((a, b) => a.id - b.id);\r\n\r\n        // Now the commerces array is sorted by ID\r\n        this.commerces = commerces;\r\n\r\n        // Set firstCommerce to the last item in the commerces array\r\n        if (this.commerces.length > 0) {\r\n          this.firstCommerce = this.commerces[this.commerces.length - 1];\r\n\r\n          // Repopulate form fields with updated data\r\n          this.loadCommerceDetails(this.firstCommerce);\r\n\r\n          // Set the clicked commerce\r\n          this.commerceService.setClickedCommerce(this.firstCommerce);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error refreshing commerce data:', error);\r\n      // Handle error as needed\r\n    }\r\n  }\r\n\r\n  async refreshCommerceDataUp() {\r\n    try {\r\n      if (this.selectedCommerceId) {\r\n        const commerce = await this.commerceService.getCommerceById(this.selectedCommerceId);\r\n        this.loadCommerceDetails(commerce);\r\n        \r\n      }\r\n\r\n\r\n    } catch (error) {\r\n      console.error('Error refreshing commerce data:', error);\r\n      // Handle error as needed\r\n    }\r\n  }\r\n\r\n  async updateVilleName(villeId: number) {\r\n    this.villeName = await this.commerceService.getVilleNameByVilleId(villeId);\r\n  }\r\n\r\n  async loadCommerceDetails(commerce: any) {\r\n    this.selectedCommerceId = commerce.id;\r\n    this.firstCommerce = commerce;\r\n    const villeId = this.firstCommerce.ville_id;\r\n    const villeName = await this.commerceService.getVilleNameByVilleId(villeId);\r\n    // Populate form with details of the selected commerce\r\n    this.commerceForm.patchValue({\r\n      commercename: commerce.commercename,\r\n      services: commerce.services,\r\n      image_commerce: commerce.image_commerce || '',\r\n      ville_id: villeName,\r\n      // Populate other form controls as needed\r\n    });\r\n  }\r\n\r\n  async openUpdateCommerceModal() {\r\n    try {\r\n      // Check if selectedCommerceId is defined\r\n      if (!this.selectedCommerceId) {\r\n        console.error('No commerce selected.');\r\n        return;\r\n      }\r\n\r\n      // Fetch the commerce corresponding to the selectedCommerceId\r\n      const selectedCommerce = await this.commerceService.getCommerceById(\r\n        this.selectedCommerceId\r\n      );\r\n\r\n      // Open the modal with the UpdateCommerceModalPage component\r\n      const modal = await this.modalController.create({\r\n        component: UpdateCommerceModalPage,\r\n        componentProps: {\r\n          commerce: selectedCommerce, // Pass the selected commerce as props\r\n        },\r\n      });\r\n\r\n      // Handle modal dismissal if needed\r\n      modal.onDidDismiss().then((result) => {\r\n        console.log('Modal dismissed:', result);\r\n        if (result.data.dismissed === 'confirm') {\r\n          // Handle confirmation\r\n          console.log('Modal dismissed with confirm role');\r\n          // For example, refresh commerce data\r\n          this.refreshCommerceDataUp();\r\n        } else if (result.data.dismissed === 'cancel') {\r\n          // Handle cancellation\r\n          console.log('Modal dismissed with cancel role');\r\n        } else {\r\n          // Handle other dismissals\r\n          console.log(\r\n            'Modal dismissed with unexpected role:',\r\n            result.data.dismissed\r\n          );\r\n        }\r\n      });\r\n\r\n      // Present the modal\r\n      await modal.present();\r\n    } catch (error) {\r\n      console.error('Error opening update commerce modal:', error);\r\n    }\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar>\r\n    <ion-title>Commerces</ion-title>\r\n    <ion-buttons slot=\"end\">\r\n      <ion-button (click)=\"openUpdateCommerceModal()\" color=\"primary\">\r\n        Edit\r\n      </ion-button>\r\n    </ion-buttons>\r\n  </ion-toolbar>\r\n</ion-header> \r\n \r\n<ion-content>\r\n  <!-- List of commerces -->\r\n  commerces\r\n  <div scrolly=\"true\" style=\"max-height: 100px\">\r\n    <div *ngIf=\"commerces && commerces.length > 0\" class=\"commerce-list\">\r\n      <ion-list>\r\n        <ion-item *ngFor=\"let commerce of commerces\" [class.selected-commerce]=\"commerce.id === selectedCommerceId\"  (click)=\"loadCommerceDetails(commerce)\">\r\n          {{ commerce.commercename }}\r\n        </ion-item>\r\n        \r\n      </ion-list>\r\n    </div>\r\n  </div>\r\n  \r\n\r\n  <!-- Form for the first commerce -->\r\n  <div *ngIf=\"firstCommerce\" class=\"commerce-form\">\r\n    <form [formGroup]=\"commerceForm\">\r\n      <ion-item>\r\n        <img [src]=\"commerceForm.get('image_commerce')?.value\" alt=\"Commerce Image\" />\r\n      </ion-item>\r\n      <ion-item>\r\n        <ion-label position=\"floating\">Commerce Name</ion-label>\r\n        <ion-input type=\"text\" formControlName=\"commercename\" [readonly]=\"true\"></ion-input>\r\n      </ion-item>\r\n      <ion-item>\r\n        <ion-label position=\"floating\">Services</ion-label>\r\n        <ion-textarea formControlName=\"services\" rows=\"10\" style=\"min-height: 200px\" [readonly]=\"true\"></ion-textarea>\r\n      </ion-item>\r\n      <ion-item>\r\n        <ion-label position=\"floating\">Ville</ion-label>\r\n        <ion-textarea formControlName=\"ville_id\" [readonly]=\"true\"></ion-textarea>\r\n      </ion-item>\r\n    </form>\r\n  </div>\r\n\r\n  <!-- Display message when no commerce exists -->\r\n  <div *ngIf=\"noCommerceMessage\" class=\"no-commerce-message\">\r\n    <p>{{ noCommerceMessage }}</p>\r\n  </div>\r\n\r\n  <!-- FAB button -->\r\n  <ion-fab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\r\n    <ion-fab-button (click)=\"openCommerceModal()\">\r\n      <ion-icon name=\"add\"></ion-icon>\r\n    </ion-fab-button>\r\n  </ion-fab>\r\n</ion-content>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}