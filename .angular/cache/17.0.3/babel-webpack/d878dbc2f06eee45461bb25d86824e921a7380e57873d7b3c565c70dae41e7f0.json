{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/jclon/chatgptVcp/Ionic-vcp-macbook27mars22024/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"src/app/services/commerce.service\";\nimport * as i4 from \"src/app/services/user.service\";\nimport * as i5 from \"@angular/common\";\nfunction CommerceModalPage_ion_select_option_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ville_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", ville_r3.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ville_r3.villename);\n  }\n}\nfunction CommerceModalPage_ion_item_57_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 23);\n    i0.ɵɵlistener(\"click\", function CommerceModalPage_ion_item_57_Template_ion_item_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const ville_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.selectVille(ville_r4));\n    });\n    i0.ɵɵelementStart(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ville_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ville_r4.villename);\n  }\n}\nexport class CommerceModalPage {\n  constructor(formBuilder, modalController, commerceService, userService, alertController) {\n    this.formBuilder = formBuilder;\n    this.modalController = modalController;\n    this.commerceService = commerceService;\n    this.userService = userService;\n    this.alertController = alertController;\n    this.villes = [];\n    this.filteredVilles = [];\n  }\n  ngOnInit() {\n    this.initForm();\n    this.fetchVilles();\n  }\n  initForm() {\n    this.commerceForm = this.formBuilder.group({\n      commercename: ['', Validators.required],\n      services: ['', Validators.required],\n      image_commerce: [''],\n      business_owner_id: [this.businessOwnerId, Validators.required],\n      ville_id: ['', Validators.required]\n    });\n  }\n  onSubmit() {\n    if (this.commerceForm.valid) {\n      // Handle form submission\n      const formData = this.commerceForm.value;\n      console.log('Form Data:', formData);\n      // You can send the form data to a service for further processing\n    }\n  }\n\n  cancel() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield _this.modalController.dismiss({\n        dismissed: 'cancel'\n      });\n    })();\n  }\n  confirm() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const formData = _this2.commerceForm.value;\n      // Check if any required fields are missing\n      if (!formData.commercename || !formData.services || !formData.ville_id || !formData.image_commerce && !(formData.image_commerce instanceof File)) {\n        // Construct alert message with missing fields named\n        let alertMessage = 'Please fill in the following required fields:';\n        if (!formData.commercename) alertMessage += `\\n- Commerce Name`;\n        if (!formData.services) alertMessage += `\\n- Services`;\n        if (!formData.ville_id) alertMessage += `\\n- Ville`;\n        if (!formData.image_commerce && !(formData.image_commerce instanceof File)) alertMessage += `\\n- Image`;\n        // Alert specifying the missing fields\n        alert(alertMessage);\n      } else {\n        // Proceed with form submission if all required fields are filled\n        if (_this2.commerceForm.valid) {\n          console.log('Form Data:', formData);\n          try {\n            // Upload the image\n            const imageUrl = yield _this2.userService.uploadImage(formData.image_commerce);\n            if (!imageUrl) {\n              console.error('Error uploading image or generating URL');\n              yield _this2.presentAlert('Error', 'Failed to upload image or generate URL');\n              return;\n            }\n            // Update the form data with the image URL\n            formData.image_commerce = imageUrl;\n            console.log('formData.image_commerce', formData.image_commerce);\n            console.log('formData', formData);\n            const addedCommerce = yield _this2.commerceService.addCommerce(formData);\n            console.log('addedCommerce', addedCommerce);\n            if (addedCommerce) {\n              console.log('Commerce added successfully:', addedCommerce);\n              // Display an alert to notify the user\n              _this2.presentAlert('Success', 'Commerce added successfully');\n              yield _this2.modalController.dismiss({\n                dismissed: 'confirm',\n                data: addedCommerce\n              }); // Pass addedCommerce data\n            } else {\n              console.error('Failed to add commerce');\n              yield _this2.modalController.dismiss({\n                dismissed: 'error'\n              }); // Dismiss with error role\n            }\n          } catch (error) {\n            console.error('Error adding commerce :', error);\n            // Handle error as needed\n          }\n          // Close the modal after saving changes\n          _this2.modalController.dismiss();\n        }\n      }\n    })();\n  }\n  presentAlert(header, message) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      const alert = yield _this3.alertController.create({\n        header: header,\n        message: message,\n        buttons: ['OK']\n      });\n      yield alert.present();\n    })();\n  }\n  addPhoto(event) {\n    // Handle image upload logic here\n    const file = event.target.files[0];\n    console.log('Selected File:', file);\n    this.commerceForm.patchValue({\n      image_commerce: file\n    });\n  }\n  fetchVilles() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this4.villes = yield _this4.commerceService.getAllVilles();\n      } catch (error) {\n        console.error('Error fetching villes:', error);\n      }\n    })();\n  }\n  filterVilles(searchTerm) {\n    this.filteredVilles = this.villes.filter(ville => ville.villename.toLowerCase().includes(searchTerm.toLowerCase()));\n  }\n  selectVille(ville) {\n    this.commerceForm.patchValue({\n      ville_id: ville.id\n    });\n  }\n  static #_ = this.ɵfac = function CommerceModalPage_Factory(t) {\n    return new (t || CommerceModalPage)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ModalController), i0.ɵɵdirectiveInject(i3.CommerceService), i0.ɵɵdirectiveInject(i4.UserService), i0.ɵɵdirectiveInject(i2.AlertController));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CommerceModalPage,\n    selectors: [[\"app-commerce-modal\"]],\n    inputs: {\n      businessOwnerId: \"businessOwnerId\"\n    },\n    decls: 58,\n    vars: 5,\n    consts: [[3, \"translucent\"], [\"slot\", \"start\"], [\"color\", \"primary\", 3, \"click\"], [\"slot\", \"end\"], [3, \"fullscreen\"], [3, \"formGroup\"], [\"size\", \"4\"], [\"size\", \"4\", 1, \"column-center\"], [1, \"circle\"], [\"name\", \"person-circle-outline\", 1, \"contact-icon\"], [\"expand\", \"block\", 3, \"click\"], [\"type\", \"file\", \"accept\", \"image/png, image/jpeg\", 2, \"display\", \"none\", 3, \"change\"], [\"fileInput\", \"\"], [\"size\", \"12\"], [\"position\", \"floating\"], [\"formControlName\", \"commercename\", \"type\", \"text\"], [\"formControlName\", \"services\"], [\"formControlName\", \"image_commerce\", \"type\", \"text\", \"readonly\", \"\"], [\"formControlName\", \"ville_id\", \"interface\", \"popover\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"ionInput\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [3, \"click\"]],\n    template: function CommerceModalPage_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r7 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-title\");\n        i0.ɵɵtext(3, \"Commerce Modal\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"ion-buttons\", 1)(5, \"ion-button\", 2);\n        i0.ɵɵlistener(\"click\", function CommerceModalPage_Template_ion_button_click_5_listener() {\n          return ctx.cancel();\n        });\n        i0.ɵɵtext(6, \" Cancel \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"ion-buttons\", 3)(8, \"ion-button\", 2);\n        i0.ɵɵlistener(\"click\", function CommerceModalPage_Template_ion_button_click_8_listener() {\n          return ctx.confirm();\n        });\n        i0.ɵɵtext(9, \" Confirm \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(10, \"ion-content\", 4)(11, \"form\", 5)(12, \"ion-grid\")(13, \"ion-row\");\n        i0.ɵɵelement(14, \"ion-col\", 6);\n        i0.ɵɵelementStart(15, \"ion-col\", 7)(16, \"div\", 8);\n        i0.ɵɵelement(17, \"ion-icon\", 9);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(18, \"ion-col\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"ion-row\");\n        i0.ɵɵelement(20, \"ion-col\", 6);\n        i0.ɵɵelementStart(21, \"ion-col\", 7)(22, \"ion-button\", 10);\n        i0.ɵɵlistener(\"click\", function CommerceModalPage_Template_ion_button_click_22_listener() {\n          i0.ɵɵrestoreView(_r7);\n          const _r0 = i0.ɵɵreference(25);\n          return i0.ɵɵresetView(_r0.click());\n        });\n        i0.ɵɵtext(23, \"Add Photo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"input\", 11, 12);\n        i0.ɵɵlistener(\"change\", function CommerceModalPage_Template_input_change_24_listener($event) {\n          return ctx.addPhoto($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(26, \"ion-col\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"ion-row\");\n        i0.ɵɵelement(28, \"ion-col\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"ion-row\");\n        i0.ɵɵelement(30, \"ion-col\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"ion-row\");\n        i0.ɵɵelement(32, \"ion-col\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"ion-row\")(34, \"ion-col\", 13)(35, \"ion-item\")(36, \"ion-label\", 14);\n        i0.ɵɵtext(37, \"Commerce Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(38, \"ion-input\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"ion-item\")(40, \"ion-label\", 14);\n        i0.ɵɵtext(41, \"Services\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(42, \"ion-textarea\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"ion-item\")(44, \"ion-label\", 14);\n        i0.ɵɵtext(45, \"Image URL\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(46, \"ion-input\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"ion-item\")(48, \"ion-label\");\n        i0.ɵɵtext(49, \"Ville\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"ion-select\", 18);\n        i0.ɵɵtemplate(51, CommerceModalPage_ion_select_option_51_Template, 2, 2, \"ion-select-option\", 19);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(52, \"ion-item\")(53, \"ion-label\");\n        i0.ɵɵtext(54, \"Search Ville\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(55, \"ion-searchbar\", 20);\n        i0.ɵɵlistener(\"ionInput\", function CommerceModalPage_Template_ion_searchbar_ionInput_55_listener($event) {\n          return ctx.filterVilles($event.target.value || \"\");\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(56, \"ion-list\");\n        i0.ɵɵtemplate(57, CommerceModalPage_ion_item_57_Template, 3, 1, \"ion-item\", 21);\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"translucent\", true);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"fullscreen\", true);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.commerceForm);\n        i0.ɵɵadvance(40);\n        i0.ɵɵproperty(\"ngForOf\", ctx.villes);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.filteredVilles);\n      }\n    },\n    dependencies: [i5.NgForOf, i1.ɵNgNoValidate, i1.NgControlStatus, i1.NgControlStatusGroup, i2.IonButton, i2.IonButtons, i2.IonCol, i2.IonContent, i2.IonGrid, i2.IonHeader, i2.IonIcon, i2.IonInput, i2.IonItem, i2.IonLabel, i2.IonList, i2.IonRow, i2.IonSearchbar, i2.IonSelect, i2.IonSelectOption, i2.IonTextarea, i2.IonTitle, i2.IonToolbar, i2.SelectValueAccessor, i2.TextValueAccessor, i1.FormGroupDirective, i1.FormControlName],\n    styles: [\".column-center[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.circle[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  width: 80px; \\n\\n  height: 80px; \\n\\n  border-radius: 50%;\\n  background-color: #ccc; \\n\\n}\\n\\n.contact-icon[_ngcontent-%COMP%] {\\n  font-size: 48px; \\n\\n  color: white; \\n\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvY29tbWVyY2UtbW9kYWwvY29tbWVyY2UtbW9kYWwucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksYUFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7QUFDSjs7QUFFRTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0EsV0FBQSxFQUFBLHFCQUFBO0VBQ0EsWUFBQSxFQUFBLHFCQUFBO0VBQ0Esa0JBQUE7RUFDQSxzQkFBQSxFQUFBLDRCQUFBO0FBQ0o7O0FBRUU7RUFDRSxlQUFBLEVBQUEscUJBQUE7RUFDQSxZQUFBLEVBQUEsZUFBQTtBQUNKIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbHVtbi1jZW50ZXIge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICB9XHJcbiAgXHJcbiAgLmNpcmNsZSB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgd2lkdGg6IDgwcHg7IC8qIEFkanVzdCBhcyBuZWVkZWQgKi9cclxuICAgIGhlaWdodDogODBweDsgLyogQWRqdXN0IGFzIG5lZWRlZCAqL1xyXG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2NjYzsgLyogQ2lyY2xlIGJhY2tncm91bmQgY29sb3IgKi9cclxuICB9XHJcbiAgXHJcbiAgLmNvbnRhY3QtaWNvbiB7XHJcbiAgICBmb250LXNpemU6IDQ4cHg7IC8qIEFkanVzdCBhcyBuZWVkZWQgKi9cclxuICAgIGNvbG9yOiB3aGl0ZTsgLyogSWNvbiBjb2xvciAqL1xyXG4gIH1cclxuICBcclxuXHJcbiAgIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","ville_r3","id","ɵɵadvance","ɵɵtextInterpolate","villename","ɵɵlistener","CommerceModalPage_ion_item_57_Template_ion_item_click_0_listener","restoredCtx","ɵɵrestoreView","_r6","ville_r4","$implicit","ctx_r5","ɵɵnextContext","ɵɵresetView","selectVille","CommerceModalPage","constructor","formBuilder","modalController","commerceService","userService","alertController","villes","filteredVilles","ngOnInit","initForm","fetchVilles","commerceForm","group","commercename","required","services","image_commerce","business_owner_id","businessOwnerId","ville_id","onSubmit","valid","formData","value","console","log","cancel","_this","_asyncToGenerator","dismiss","dismissed","confirm","_this2","File","alertMessage","alert","imageUrl","uploadImage","error","presentAlert","addedCommerce","addCommerce","data","header","message","_this3","create","buttons","present","addPhoto","event","file","target","files","patchValue","_this4","getAllVilles","filterVilles","searchTerm","filter","ville","toLowerCase","includes","_","ɵɵdirectiveInject","i1","FormBuilder","i2","ModalController","i3","CommerceService","i4","UserService","AlertController","_2","selectors","inputs","decls","vars","consts","template","CommerceModalPage_Template","rf","ctx","CommerceModalPage_Template_ion_button_click_5_listener","CommerceModalPage_Template_ion_button_click_8_listener","ɵɵelement","CommerceModalPage_Template_ion_button_click_22_listener","_r7","_r0","ɵɵreference","click","CommerceModalPage_Template_input_change_24_listener","$event","ɵɵtemplate","CommerceModalPage_ion_select_option_51_Template","CommerceModalPage_Template_ion_searchbar_ionInput_55_listener","CommerceModalPage_ion_item_57_Template"],"sources":["C:\\Users\\jclon\\chatgptVcp\\Ionic-vcp-macbook27mars22024\\src\\app\\pages\\commerce-modal\\commerce-modal.page.ts","C:\\Users\\jclon\\chatgptVcp\\Ionic-vcp-macbook27mars22024\\src\\app\\pages\\commerce-modal\\commerce-modal.page.html"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { CommerceService } from 'src/app/services/commerce.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { AlertController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-commerce-modal',\r\n  templateUrl: './commerce-modal.page.html',\r\n  styleUrls: ['./commerce-modal.page.scss'],\r\n})\r\nexport class CommerceModalPage implements OnInit {\r\n  @Input() businessOwnerId!: string;\r\n  commerceForm!: FormGroup;\r\n  villes: any[] = [];\r\n  filteredVilles: any[] = [];\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder,\r\n    private modalController: ModalController,\r\n    private commerceService: CommerceService,\r\n    private userService: UserService,\r\n    private alertController: AlertController\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.initForm(); \r\n    this.fetchVilles();\r\n  }\r\n \r\n  private initForm() {\r\n    this.commerceForm = this.formBuilder.group({\r\n      commercename: ['', Validators.required],\r\n      services: ['', Validators.required],\r\n      image_commerce: [''], // Optional field\r\n      business_owner_id: [this.businessOwnerId, Validators.required], // Set default value to businessOwnerId\r\n      ville_id: ['', Validators.required],\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    if (this.commerceForm.valid) {\r\n      // Handle form submission\r\n      const formData = this.commerceForm.value;\r\n      console.log('Form Data:', formData);\r\n      // You can send the form data to a service for further processing\r\n    }\r\n  }\r\n\r\n  async cancel() {\r\n    await this.modalController.dismiss({ dismissed: 'cancel' });\r\n  }\r\n\r\n  async confirm() {\r\n    const formData = this.commerceForm.value;\r\n    // Check if any required fields are missing\r\n    if (\r\n      !formData.commercename ||\r\n      !formData.services ||\r\n      !formData.ville_id ||\r\n      (!formData.image_commerce && !(formData.image_commerce instanceof File))\r\n    ) {\r\n      // Construct alert message with missing fields named\r\n      let alertMessage = 'Please fill in the following required fields:';\r\n      if (!formData.commercename) alertMessage += `\\n- Commerce Name`;\r\n      if (!formData.services) alertMessage += `\\n- Services`;\r\n      if (!formData.ville_id) alertMessage += `\\n- Ville`;\r\n      if (\r\n        !formData.image_commerce &&\r\n        !(formData.image_commerce instanceof File)\r\n      )\r\n        alertMessage += `\\n- Image`;\r\n\r\n      // Alert specifying the missing fields\r\n      alert(alertMessage);\r\n    } else {\r\n      // Proceed with form submission if all required fields are filled\r\n      if (this.commerceForm.valid) {\r\n        console.log('Form Data:', formData);\r\n        try {\r\n          // Upload the image\r\n          const imageUrl = await this.userService.uploadImage(\r\n            formData.image_commerce\r\n          );\r\n\r\n          if (!imageUrl) {\r\n            console.error('Error uploading image or generating URL');\r\n            await this.presentAlert(\r\n              'Error',\r\n              'Failed to upload image or generate URL'\r\n            );\r\n            return;\r\n          } \r\n\r\n          // Update the form data with the image URL\r\n          formData.image_commerce = imageUrl;\r\n          console.log('formData.image_commerce', formData.image_commerce);\r\n\r\n          console.log('formData', formData);\r\n\r\n          const addedCommerce = await this.commerceService.addCommerce(\r\n            formData\r\n          );\r\n          console.log('addedCommerce', addedCommerce);\r\n\r\n          if (addedCommerce) {\r\n            console.log('Commerce added successfully:', addedCommerce);\r\n            // Display an alert to notify the user\r\n            this.presentAlert('Success', 'Commerce added successfully');\r\n            await this.modalController.dismiss({ dismissed: 'confirm', data: addedCommerce }); // Pass addedCommerce data\r\n          } else {\r\n            console.error('Failed to add commerce');\r\n            await this.modalController.dismiss({ dismissed: 'error' }); // Dismiss with error role\r\n          }\r\n        } catch (error) {\r\n          console.error('Error adding commerce :', error);\r\n          // Handle error as needed\r\n        }\r\n\r\n        // Close the modal after saving changes\r\n        this.modalController.dismiss();\r\n      }\r\n    }\r\n  }\r\n\r\n  async presentAlert(header: string, message: string) {\r\n    const alert = await this.alertController.create({\r\n      header: header,\r\n      message: message,\r\n      buttons: ['OK'],\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  addPhoto(event: any) {\r\n    // Handle image upload logic here\r\n    const file = event.target.files[0];\r\n    console.log('Selected File:', file);\r\n    this.commerceForm.patchValue({\r\n      image_commerce: file,\r\n    });\r\n  }\r\n\r\n  async fetchVilles() {\r\n    try {\r\n      this.villes = await this.commerceService.getAllVilles();\r\n    } catch (error) {\r\n      console.error('Error fetching villes:', error);\r\n    }\r\n  }\r\n\r\n  filterVilles(searchTerm: string) {\r\n    this.filteredVilles = this.villes.filter((ville) =>\r\n      ville.villename.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n  }\r\n\r\n  selectVille(ville: any) {\r\n    this.commerceForm.patchValue({\r\n      ville_id: ville.id,\r\n    });\r\n  }\r\n}\r\n","<ion-header [translucent]=\"true\">\r\n  <ion-toolbar>\r\n    <ion-title>Commerce Modal</ion-title>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-button (click)=\"cancel()\" color=\"primary\"> Cancel </ion-button>\r\n    </ion-buttons>\r\n    <ion-buttons slot=\"end\">\r\n      <ion-button (click)=\"confirm()\" color=\"primary\"> Confirm </ion-button>\r\n    </ion-buttons>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content [fullscreen]=\"true\">\r\n  <form [formGroup]=\"commerceForm\">\r\n    <ion-grid>\r\n      <!-- Row 1 -->\r\n      <ion-row>\r\n        <!-- Column 1 -->\r\n        <ion-col size=\"4\"></ion-col>\r\n        <!-- Column 2 -->\r\n        <ion-col size=\"4\" class=\"column-center\">\r\n          <div class=\"circle\">\r\n            <ion-icon\r\n              name=\"person-circle-outline\"\r\n              class=\"contact-icon\"\r\n            ></ion-icon>\r\n          </div>\r\n        </ion-col>\r\n        <!-- Column 3 -->\r\n        <ion-col size=\"4\"></ion-col>\r\n      </ion-row>\r\n\r\n      <!-- Row 2 -->\r\n      <ion-row>\r\n        <!-- Column 1 -->\r\n        <ion-col size=\"4\"></ion-col>\r\n        <!-- Column 2 -->\r\n        <ion-col size=\"4\" class=\"column-center\">\r\n          <ion-button expand=\"block\" (click)=\"fileInput.click()\">Add Photo</ion-button>\r\n            <input #fileInput type=\"file\" accept=\"image/png, image/jpeg\" (change)=\"addPhoto($event)\" style=\"display:none\" />\r\n         \r\n        </ion-col>\r\n        <!-- Column 3 -->\r\n        <ion-col size=\"4\"></ion-col>\r\n      </ion-row>\r\n\r\n      <!-- Empty Row 2 -->\r\n      <ion-row>\r\n        <ion-col size=\"12\"></ion-col>\r\n      </ion-row>\r\n\r\n      <!-- Empty Row 1 -->\r\n      <ion-row>\r\n        <ion-col size=\"12\"></ion-col>\r\n      </ion-row>\r\n\r\n      <!-- Empty Row 2 -->\r\n      <ion-row>\r\n        <ion-col size=\"12\"></ion-col>\r\n      </ion-row>\r\n\r\n      <!-- Row 3 -->\r\n      <ion-row>\r\n        <ion-col size=\"12\">\r\n          <ion-item>\r\n            <ion-label position=\"floating\">Commerce Name</ion-label>\r\n            <ion-input formControlName=\"commercename\" type=\"text\"></ion-input>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-label position=\"floating\">Services</ion-label>\r\n            <ion-textarea formControlName=\"services\"></ion-textarea>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-label position=\"floating\">Image URL</ion-label>\r\n            <ion-input formControlName=\"image_commerce\" type=\"text\" readonly></ion-input>\r\n          </ion-item>\r\n          <ion-item>\r\n            <ion-label>Ville</ion-label>\r\n            <ion-select formControlName=\"ville_id\" interface=\"popover\">\r\n              <ion-select-option *ngFor=\"let ville of villes\" [value]=\"ville.id\">{{ ville.villename }}</ion-select-option>\r\n            </ion-select>\r\n          </ion-item>\r\n\r\n          <ion-item>\r\n            <ion-label>Search Ville</ion-label>\r\n            <ion-searchbar (ionInput)=\"filterVilles($event.target.value || '')\"></ion-searchbar>\r\n\r\n          </ion-item>\r\n          \r\n          <ion-list>\r\n            <ion-item *ngFor=\"let ville of filteredVilles\" (click)=\"selectVille(ville)\">\r\n              <ion-label>{{ ville.villename }}</ion-label>\r\n            </ion-item>\r\n          </ion-list>\r\n        </ion-col>\r\n      </ion-row>\r\n    </ion-grid> \r\n  </form>\r\n</ion-content>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}